<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - Agência Maravilha</title>
<link rel="icon" type="image/png" href="assets/favicon.png">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background: linear-gradient(120deg, #0f172a, #1e293b); color: white; display:flex; justify-content:center; align-items:center; height:100vh; font-family:Arial,sans-serif;}
.login-card {background:#1e293b; padding:30px; border-radius:12px; width:100%; max-width:400px; text-align:center; box-shadow:0 6px 20px rgba(0,0,0,0.4);}
.login-card input {margin-bottom:15px; padding:12px; border-radius:6px; border:none; width:100%;}
.login-card button {width:100%; padding:12px; font-weight:bold; border-radius:6px; background:#2563eb; border:none; color:white;}
.login-card button:hover {opacity:0.85;}
#msg {margin-top:12px; font-weight:bold;}
.logo {width:100px; margin-bottom:20px;}
</style>
</head>
<body>

<div class="login-card">
<img src="assets/logo.jpg" class="logo">
<h3>Login</h3>
<input type="email" id="email" placeholder="Email" class="form-control">
<input type="password" id="password" placeholder="Senha" class="form-control">
<button id="btnLogin">Entrar</button>
<p id="msg"></p>
</div>

<!-- 1️⃣ Bundle oficial UMD do Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.34.0/dist/supabase.min.js"></script>

<script>
// 2️⃣ Configuração Supabase
const SUPABASE_URL = "https://qgsfmiywdohybqlnxhdw.supabase.co";
const SUPABASE_ANON_KEY = "SUA_ANON_KEY_AQUI"; // só aqui no JS centralizado
const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// 3️⃣ Função de login
function login(email, password) {
  return supabaseClient.auth.signInWithPassword({ email, password })
    .then(({ data, error }) => {
      if (error) throw error;
      return data.session;
    });
}

// 4️⃣ Botão de login
const btnLogin = document.getElementById("btnLogin");
const msg = document.getElementById("msg");

btnLogin.addEventListener("click", async () => {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  if (!email || !password) {
    msg.style.color = "#f87171";
    msg.innerText = "Preencha todos os campos";
    return;
  }

  msg.style.color = "white";
  msg.innerText = "Verificando...";

  try {
    await login(email, password);
    msg.style.color = "#16a34a";
    msg.innerText = "Login realizado! Redirecionando...";
    setTimeout(() => window.location.href = "importar.html", 800);
  } catch (err) {
    msg.style.color = "#f87171";
    msg.innerText = "Email ou senha inválidos";
    console.error(err);
  }
});
</script>

</body>
</html>
